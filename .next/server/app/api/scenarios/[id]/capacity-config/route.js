"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/scenarios/[id]/capacity-config/route";
exports.ids = ["app/api/scenarios/[id]/capacity-config/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fscenarios%2F%5Bid%5D%2Fcapacity-config%2Froute&page=%2Fapi%2Fscenarios%2F%5Bid%5D%2Fcapacity-config%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fscenarios%2F%5Bid%5D%2Fcapacity-config%2Froute.ts&appDir=C%3A%5Cgit%5CNetWORX%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5Cgit%5CNetWORX&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fscenarios%2F%5Bid%5D%2Fcapacity-config%2Froute&page=%2Fapi%2Fscenarios%2F%5Bid%5D%2Fcapacity-config%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fscenarios%2F%5Bid%5D%2Fcapacity-config%2Froute.ts&appDir=C%3A%5Cgit%5CNetWORX%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5Cgit%5CNetWORX&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_git_NetWORX_app_api_scenarios_id_capacity_config_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/scenarios/[id]/capacity-config/route.ts */ \"(rsc)/./app/api/scenarios/[id]/capacity-config/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/scenarios/[id]/capacity-config/route\",\n        pathname: \"/api/scenarios/[id]/capacity-config\",\n        filename: \"route\",\n        bundlePath: \"app/api/scenarios/[id]/capacity-config/route\"\n    },\n    resolvedPagePath: \"C:\\\\git\\\\NetWORX\\\\app\\\\api\\\\scenarios\\\\[id]\\\\capacity-config\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_git_NetWORX_app_api_scenarios_id_capacity_config_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/scenarios/[id]/capacity-config/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZzY2VuYXJpb3MlMkYlNUJpZCU1RCUyRmNhcGFjaXR5LWNvbmZpZyUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGc2NlbmFyaW9zJTJGJTVCaWQlNUQlMkZjYXBhY2l0eS1jb25maWclMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZzY2VuYXJpb3MlMkYlNUJpZCU1RCUyRmNhcGFjaXR5LWNvbmZpZyUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDZ2l0JTVDTmV0V09SWCU1Q2FwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9QyUzQSU1Q2dpdCU1Q05ldFdPUlgmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ3NCO0FBQ25HO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV0d29yeC1lc3NlbnRpYWxzLz83OGU1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkM6XFxcXGdpdFxcXFxOZXRXT1JYXFxcXGFwcFxcXFxhcGlcXFxcc2NlbmFyaW9zXFxcXFtpZF1cXFxcY2FwYWNpdHktY29uZmlnXFxcXHJvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9zY2VuYXJpb3MvW2lkXS9jYXBhY2l0eS1jb25maWcvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9zY2VuYXJpb3MvW2lkXS9jYXBhY2l0eS1jb25maWdcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL3NjZW5hcmlvcy9baWRdL2NhcGFjaXR5LWNvbmZpZy9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkM6XFxcXGdpdFxcXFxOZXRXT1JYXFxcXGFwcFxcXFxhcGlcXFxcc2NlbmFyaW9zXFxcXFtpZF1cXFxcY2FwYWNpdHktY29uZmlnXFxcXHJvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9zY2VuYXJpb3MvW2lkXS9jYXBhY2l0eS1jb25maWcvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fscenarios%2F%5Bid%5D%2Fcapacity-config%2Froute&page=%2Fapi%2Fscenarios%2F%5Bid%5D%2Fcapacity-config%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fscenarios%2F%5Bid%5D%2Fcapacity-config%2Froute.ts&appDir=C%3A%5Cgit%5CNetWORX%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5Cgit%5CNetWORX&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/scenarios/[id]/capacity-config/route.ts":
/*!*********************************************************!*\
  !*** ./app/api/scenarios/[id]/capacity-config/route.ts ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_database__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/database */ \"(rsc)/./lib/database.ts\");\n\n\n// Save capacity configuration\nasync function POST(request, { params }) {\n    try {\n        const scenarioId = parseInt(params.id);\n        const configData = await request.json();\n        // Validate scenario exists\n        const scenarioResult = await (0,_lib_database__WEBPACK_IMPORTED_MODULE_1__.sql)`\n      SELECT * FROM scenarios WHERE id = ${scenarioId}\n    `;\n        if (scenarioResult.length === 0) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Scenario not found\"\n            }, {\n                status: 404\n            });\n        }\n        // Create capacity_configurations table if it doesn't exist\n        await (0,_lib_database__WEBPACK_IMPORTED_MODULE_1__.sql)`\n      CREATE TABLE IF NOT EXISTS capacity_configurations (\n        id SERIAL PRIMARY KEY,\n        scenario_id INTEGER REFERENCES scenarios(id) ON DELETE CASCADE,\n        config_data JSONB NOT NULL,\n        created_at TIMESTAMP DEFAULT NOW(),\n        updated_at TIMESTAMP DEFAULT NOW(),\n        UNIQUE(scenario_id)\n      )\n    `;\n        // Save or update configuration\n        await (0,_lib_database__WEBPACK_IMPORTED_MODULE_1__.sql)`\n      INSERT INTO capacity_configurations (scenario_id, config_data, created_at, updated_at)\n      VALUES (${scenarioId}, ${JSON.stringify(configData)}, NOW(), NOW())\n      ON CONFLICT (scenario_id)\n      DO UPDATE SET\n        config_data = ${JSON.stringify(configData)},\n        updated_at = NOW()\n    `;\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            message: \"Capacity configuration saved successfully\"\n        });\n    } catch (error) {\n        console.error(\"Error saving capacity configuration:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to save capacity configuration\"\n        }, {\n            status: 500\n        });\n    }\n}\n// Load capacity configuration\nasync function GET(request, { params }) {\n    try {\n        const scenarioId = parseInt(params.id);\n        // Check if table exists first\n        const tableExists = await (0,_lib_database__WEBPACK_IMPORTED_MODULE_1__.sql)`\n      SELECT EXISTS (\n        SELECT FROM information_schema.tables\n        WHERE table_name = 'capacity_configurations'\n      )\n    `;\n        if (!tableExists[0].exists) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"No configuration found for this scenario\"\n            }, {\n                status: 404\n            });\n        }\n        // Get configuration data\n        const result = await (0,_lib_database__WEBPACK_IMPORTED_MODULE_1__.sql)`\n      SELECT config_data FROM capacity_configurations WHERE scenario_id = ${scenarioId}\n    `;\n        if (result.length === 0) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"No configuration found for this scenario\"\n            }, {\n                status: 404\n            });\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            data: result[0].config_data\n        });\n    } catch (error) {\n        console.error(\"Error loading capacity configuration:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to load capacity configuration\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL3NjZW5hcmlvcy9baWRdL2NhcGFjaXR5LWNvbmZpZy9yb3V0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQXdEO0FBQ25CO0FBcUNyQyw4QkFBOEI7QUFDdkIsZUFBZUUsS0FDcEJDLE9BQW9CLEVBQ3BCLEVBQUVDLE1BQU0sRUFBOEI7SUFFdEMsSUFBSTtRQUNGLE1BQU1DLGFBQWFDLFNBQVNGLE9BQU9HLEVBQUU7UUFDckMsTUFBTUMsYUFBaUMsTUFBTUwsUUFBUU0sSUFBSTtRQUV6RCwyQkFBMkI7UUFDM0IsTUFBTUMsaUJBQWlCLE1BQU1ULGtEQUFHLENBQUM7eUNBQ0ksRUFBRUksV0FBVztJQUNsRCxDQUFDO1FBRUQsSUFBSUssZUFBZUMsTUFBTSxLQUFLLEdBQUc7WUFDL0IsT0FBT1gscURBQVlBLENBQUNTLElBQUksQ0FDdEI7Z0JBQUVHLE9BQU87WUFBcUIsR0FDOUI7Z0JBQUVDLFFBQVE7WUFBSTtRQUVsQjtRQUVBLDJEQUEyRDtRQUMzRCxNQUFNWixrREFBRyxDQUFDOzs7Ozs7Ozs7SUFTVixDQUFDO1FBRUQsK0JBQStCO1FBQy9CLE1BQU1BLGtEQUFHLENBQUM7O2NBRUEsRUFBRUksV0FBVyxFQUFFLEVBQUVTLEtBQUtDLFNBQVMsQ0FBQ1AsWUFBWTs7O3NCQUdwQyxFQUFFTSxLQUFLQyxTQUFTLENBQUNQLFlBQVk7O0lBRS9DLENBQUM7UUFFRCxPQUFPUixxREFBWUEsQ0FBQ1MsSUFBSSxDQUFDO1lBQ3ZCTyxTQUFTO1lBQ1RDLFNBQVM7UUFDWDtJQUVGLEVBQUUsT0FBT0wsT0FBTztRQUNkTSxRQUFRTixLQUFLLENBQUMsd0NBQXdDQTtRQUN0RCxPQUFPWixxREFBWUEsQ0FBQ1MsSUFBSSxDQUN0QjtZQUFFRyxPQUFPO1FBQXdDLEdBQ2pEO1lBQUVDLFFBQVE7UUFBSTtJQUVsQjtBQUNGO0FBRUEsOEJBQThCO0FBQ3ZCLGVBQWVNLElBQ3BCaEIsT0FBb0IsRUFDcEIsRUFBRUMsTUFBTSxFQUE4QjtJQUV0QyxJQUFJO1FBQ0YsTUFBTUMsYUFBYUMsU0FBU0YsT0FBT0csRUFBRTtRQUVyQyw4QkFBOEI7UUFDOUIsTUFBTWEsY0FBYyxNQUFNbkIsa0RBQUcsQ0FBQzs7Ozs7SUFLOUIsQ0FBQztRQUVELElBQUksQ0FBQ21CLFdBQVcsQ0FBQyxFQUFFLENBQUNDLE1BQU0sRUFBRTtZQUMxQixPQUFPckIscURBQVlBLENBQUNTLElBQUksQ0FDdEI7Z0JBQUVHLE9BQU87WUFBMkMsR0FDcEQ7Z0JBQUVDLFFBQVE7WUFBSTtRQUVsQjtRQUVBLHlCQUF5QjtRQUN6QixNQUFNUyxTQUFTLE1BQU1yQixrREFBRyxDQUFDOzBFQUM2QyxFQUFFSSxXQUFXO0lBQ25GLENBQUM7UUFFRCxJQUFJaUIsT0FBT1gsTUFBTSxLQUFLLEdBQUc7WUFDdkIsT0FBT1gscURBQVlBLENBQUNTLElBQUksQ0FDdEI7Z0JBQUVHLE9BQU87WUFBMkMsR0FDcEQ7Z0JBQUVDLFFBQVE7WUFBSTtRQUVsQjtRQUVBLE9BQU9iLHFEQUFZQSxDQUFDUyxJQUFJLENBQUM7WUFDdkJPLFNBQVM7WUFDVE8sTUFBTUQsTUFBTSxDQUFDLEVBQUUsQ0FBQ0UsV0FBVztRQUM3QjtJQUVGLEVBQUUsT0FBT1osT0FBTztRQUNkTSxRQUFRTixLQUFLLENBQUMseUNBQXlDQTtRQUN2RCxPQUFPWixxREFBWUEsQ0FBQ1MsSUFBSSxDQUN0QjtZQUFFRyxPQUFPO1FBQXdDLEdBQ2pEO1lBQUVDLFFBQVE7UUFBSTtJQUVsQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV0d29yeC1lc3NlbnRpYWxzLy4vYXBwL2FwaS9zY2VuYXJpb3MvW2lkXS9jYXBhY2l0eS1jb25maWcvcm91dGUudHM/YjRjZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xuaW1wb3J0IHsgc3FsIH0gZnJvbSAnQC9saWIvZGF0YWJhc2UnO1xuXG5pbnRlcmZhY2UgQ2FwYWNpdHlDb25maWdEYXRhIHtcbiAgcHJvamVjdENvbmZpZzoge1xuICAgIGRlZmF1bHRfbGVhc2VfdGVybV95ZWFyczogbnVtYmVyO1xuICAgIGRlZmF1bHRfdXRpbGl6YXRpb25fcmF0ZTogbnVtYmVyO1xuICAgIHByb2plY3RfZHVyYXRpb25feWVhcnM6IG51bWJlcjtcbiAgICBiYXNlX3llYXI6IG51bWJlcjtcbiAgfTtcbiAgZ3Jvd3RoRm9yZWNhc3RzOiBBcnJheTx7XG4gICAgeWVhcl9udW1iZXI6IG51bWJlcjtcbiAgICBmb3JlY2FzdF90eXBlOiAnYWN0dWFsJyB8ICdmb3JlY2FzdCcgfCAnbGluZWFyJztcbiAgICB1bml0c19ncm93dGhfcmF0ZT86IG51bWJlcjtcbiAgICBkb2xsYXJfZ3Jvd3RoX3JhdGU/OiBudW1iZXI7XG4gICAgYWJzb2x1dGVfdW5pdHM/OiBudW1iZXI7XG4gICAgYWJzb2x1dGVfZG9sbGFycz86IG51bWJlcjtcbiAgICBpc19hY3R1YWxfZGF0YTogYm9vbGVhbjtcbiAgICBjb25maWRlbmNlX2xldmVsPzogbnVtYmVyO1xuICAgIG5vdGVzPzogc3RyaW5nO1xuICB9PjtcbiAgZmFjaWxpdGllczogQXJyYXk8e1xuICAgIGlkPzogbnVtYmVyO1xuICAgIG5hbWU6IHN0cmluZztcbiAgICBjaXR5OiBzdHJpbmc7XG4gICAgc3RhdGU6IHN0cmluZztcbiAgICB6aXBfY29kZTogc3RyaW5nO1xuICAgIHNxdWFyZV9mZWV0OiBudW1iZXI7XG4gICAgY2FwYWNpdHlfdW5pdHM6IG51bWJlcjtcbiAgICBpc19mb3JjZWQ6IGJvb2xlYW47XG4gICAgZm9yY2Vfc3RhcnRfeWVhcj86IG51bWJlcjtcbiAgICBmb3JjZV9lbmRfeWVhcj86IG51bWJlcjtcbiAgICBhbGxvd19leHBhbnNpb246IGJvb2xlYW47XG4gICAgbGVhc2VfcmF0ZV9wZXJfc3FmdD86IG51bWJlcjtcbiAgICBvcGVyYXRpbmdfY29zdF9wZXJfc3FmdD86IG51bWJlcjtcbiAgfT47XG59XG5cbi8vIFNhdmUgY2FwYWNpdHkgY29uZmlndXJhdGlvblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QoXG4gIHJlcXVlc3Q6IE5leHRSZXF1ZXN0LFxuICB7IHBhcmFtcyB9OiB7IHBhcmFtczogeyBpZDogc3RyaW5nIH0gfVxuKSB7XG4gIHRyeSB7XG4gICAgY29uc3Qgc2NlbmFyaW9JZCA9IHBhcnNlSW50KHBhcmFtcy5pZCk7XG4gICAgY29uc3QgY29uZmlnRGF0YTogQ2FwYWNpdHlDb25maWdEYXRhID0gYXdhaXQgcmVxdWVzdC5qc29uKCk7XG5cbiAgICAvLyBWYWxpZGF0ZSBzY2VuYXJpbyBleGlzdHNcbiAgICBjb25zdCBzY2VuYXJpb1Jlc3VsdCA9IGF3YWl0IHNxbGBcbiAgICAgIFNFTEVDVCAqIEZST00gc2NlbmFyaW9zIFdIRVJFIGlkID0gJHtzY2VuYXJpb0lkfVxuICAgIGA7XG5cbiAgICBpZiAoc2NlbmFyaW9SZXN1bHQubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgZXJyb3I6ICdTY2VuYXJpbyBub3QgZm91bmQnIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDQgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBDcmVhdGUgY2FwYWNpdHlfY29uZmlndXJhdGlvbnMgdGFibGUgaWYgaXQgZG9lc24ndCBleGlzdFxuICAgIGF3YWl0IHNxbGBcbiAgICAgIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIGNhcGFjaXR5X2NvbmZpZ3VyYXRpb25zIChcbiAgICAgICAgaWQgU0VSSUFMIFBSSU1BUlkgS0VZLFxuICAgICAgICBzY2VuYXJpb19pZCBJTlRFR0VSIFJFRkVSRU5DRVMgc2NlbmFyaW9zKGlkKSBPTiBERUxFVEUgQ0FTQ0FERSxcbiAgICAgICAgY29uZmlnX2RhdGEgSlNPTkIgTk9UIE5VTEwsXG4gICAgICAgIGNyZWF0ZWRfYXQgVElNRVNUQU1QIERFRkFVTFQgTk9XKCksXG4gICAgICAgIHVwZGF0ZWRfYXQgVElNRVNUQU1QIERFRkFVTFQgTk9XKCksXG4gICAgICAgIFVOSVFVRShzY2VuYXJpb19pZClcbiAgICAgIClcbiAgICBgO1xuXG4gICAgLy8gU2F2ZSBvciB1cGRhdGUgY29uZmlndXJhdGlvblxuICAgIGF3YWl0IHNxbGBcbiAgICAgIElOU0VSVCBJTlRPIGNhcGFjaXR5X2NvbmZpZ3VyYXRpb25zIChzY2VuYXJpb19pZCwgY29uZmlnX2RhdGEsIGNyZWF0ZWRfYXQsIHVwZGF0ZWRfYXQpXG4gICAgICBWQUxVRVMgKCR7c2NlbmFyaW9JZH0sICR7SlNPTi5zdHJpbmdpZnkoY29uZmlnRGF0YSl9LCBOT1coKSwgTk9XKCkpXG4gICAgICBPTiBDT05GTElDVCAoc2NlbmFyaW9faWQpXG4gICAgICBETyBVUERBVEUgU0VUXG4gICAgICAgIGNvbmZpZ19kYXRhID0gJHtKU09OLnN0cmluZ2lmeShjb25maWdEYXRhKX0sXG4gICAgICAgIHVwZGF0ZWRfYXQgPSBOT1coKVxuICAgIGA7XG5cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIG1lc3NhZ2U6ICdDYXBhY2l0eSBjb25maWd1cmF0aW9uIHNhdmVkIHN1Y2Nlc3NmdWxseSdcbiAgICB9KTtcblxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHNhdmluZyBjYXBhY2l0eSBjb25maWd1cmF0aW9uOicsIGVycm9yKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IGVycm9yOiAnRmFpbGVkIHRvIHNhdmUgY2FwYWNpdHkgY29uZmlndXJhdGlvbicgfSxcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgICk7XG4gIH1cbn1cblxuLy8gTG9hZCBjYXBhY2l0eSBjb25maWd1cmF0aW9uXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKFxuICByZXF1ZXN0OiBOZXh0UmVxdWVzdCxcbiAgeyBwYXJhbXMgfTogeyBwYXJhbXM6IHsgaWQ6IHN0cmluZyB9IH1cbikge1xuICB0cnkge1xuICAgIGNvbnN0IHNjZW5hcmlvSWQgPSBwYXJzZUludChwYXJhbXMuaWQpO1xuXG4gICAgLy8gQ2hlY2sgaWYgdGFibGUgZXhpc3RzIGZpcnN0XG4gICAgY29uc3QgdGFibGVFeGlzdHMgPSBhd2FpdCBzcWxgXG4gICAgICBTRUxFQ1QgRVhJU1RTIChcbiAgICAgICAgU0VMRUNUIEZST00gaW5mb3JtYXRpb25fc2NoZW1hLnRhYmxlc1xuICAgICAgICBXSEVSRSB0YWJsZV9uYW1lID0gJ2NhcGFjaXR5X2NvbmZpZ3VyYXRpb25zJ1xuICAgICAgKVxuICAgIGA7XG5cbiAgICBpZiAoIXRhYmxlRXhpc3RzWzBdLmV4aXN0cykge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IGVycm9yOiAnTm8gY29uZmlndXJhdGlvbiBmb3VuZCBmb3IgdGhpcyBzY2VuYXJpbycgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwNCB9XG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIEdldCBjb25maWd1cmF0aW9uIGRhdGFcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzcWxgXG4gICAgICBTRUxFQ1QgY29uZmlnX2RhdGEgRlJPTSBjYXBhY2l0eV9jb25maWd1cmF0aW9ucyBXSEVSRSBzY2VuYXJpb19pZCA9ICR7c2NlbmFyaW9JZH1cbiAgICBgO1xuXG4gICAgaWYgKHJlc3VsdC5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBlcnJvcjogJ05vIGNvbmZpZ3VyYXRpb24gZm91bmQgZm9yIHRoaXMgc2NlbmFyaW8nIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDQgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIGRhdGE6IHJlc3VsdFswXS5jb25maWdfZGF0YVxuICAgIH0pO1xuXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgbG9hZGluZyBjYXBhY2l0eSBjb25maWd1cmF0aW9uOicsIGVycm9yKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IGVycm9yOiAnRmFpbGVkIHRvIGxvYWQgY2FwYWNpdHkgY29uZmlndXJhdGlvbicgfSxcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgICk7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJzcWwiLCJQT1NUIiwicmVxdWVzdCIsInBhcmFtcyIsInNjZW5hcmlvSWQiLCJwYXJzZUludCIsImlkIiwiY29uZmlnRGF0YSIsImpzb24iLCJzY2VuYXJpb1Jlc3VsdCIsImxlbmd0aCIsImVycm9yIiwic3RhdHVzIiwiSlNPTiIsInN0cmluZ2lmeSIsInN1Y2Nlc3MiLCJtZXNzYWdlIiwiY29uc29sZSIsIkdFVCIsInRhYmxlRXhpc3RzIiwiZXhpc3RzIiwicmVzdWx0IiwiZGF0YSIsImNvbmZpZ19kYXRhIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/scenarios/[id]/capacity-config/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/database.ts":
/*!*************************!*\
  !*** ./lib/database.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AuditLogService: () => (/* binding */ AuditLogService),\n/* harmony export */   DataFileService: () => (/* binding */ DataFileService),\n/* harmony export */   OptimizationResultService: () => (/* binding */ OptimizationResultService),\n/* harmony export */   ProjectService: () => (/* binding */ ProjectService),\n/* harmony export */   ScenarioIterationService: () => (/* binding */ ScenarioIterationService),\n/* harmony export */   ScenarioService: () => (/* binding */ ScenarioService),\n/* harmony export */   TransportConfigService: () => (/* binding */ TransportConfigService),\n/* harmony export */   WarehouseConfigService: () => (/* binding */ WarehouseConfigService),\n/* harmony export */   sql: () => (/* binding */ sql)\n/* harmony export */ });\n/* harmony import */ var _neondatabase_serverless__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @neondatabase/serverless */ \"(rsc)/./node_modules/@neondatabase/serverless/index.mjs\");\n\nif (!process.env.DATABASE_URL) {\n    throw new Error(\"DATABASE_URL is not set\");\n}\nconst sql = (0,_neondatabase_serverless__WEBPACK_IMPORTED_MODULE_0__.neon)(process.env.DATABASE_URL);\n// Database operations for projects\nclass ProjectService {\n    static async createProject(data) {\n        const [project] = await sql`\n      INSERT INTO projects (name, description, owner_id, project_duration_years, base_year, status)\n      VALUES (${data.name}, ${data.description || null}, ${data.owner_id || null},\n              ${data.project_duration_years || 5}, ${data.base_year || new Date().getFullYear()},\n              ${data.status || \"active\"})\n      RETURNING *\n    `;\n        return project;\n    }\n    static async getProjects() {\n        return await sql`\n      SELECT * FROM projects\n      ORDER BY created_at DESC\n    `;\n    }\n    static async getProject(id) {\n        const [project] = await sql`\n      SELECT * FROM projects WHERE id = ${id}\n    `;\n        return project || null;\n    }\n    static async updateProject(id, data) {\n        const [project] = await sql`\n      UPDATE projects\n      SET name = COALESCE(${data.name}, name),\n          description = COALESCE(${data.description}, description),\n          status = COALESCE(${data.status}, status),\n          project_duration_years = COALESCE(${data.project_duration_years}, project_duration_years),\n          base_year = COALESCE(${data.base_year}, base_year),\n          updated_at = CURRENT_TIMESTAMP\n      WHERE id = ${id}\n      RETURNING *\n    `;\n        return project;\n    }\n    static async deleteProject(id) {\n        await sql`DELETE FROM projects WHERE id = ${id}`;\n    }\n}\n// Database operations for scenarios\nclass ScenarioService {\n    static async createScenario(data) {\n        // Extract project_id from metadata if present\n        const project_id = data.metadata?.project_id;\n        if (!project_id) {\n            throw new Error(\"project_id is required in metadata\");\n        }\n        const [scenario] = await sql`\n      INSERT INTO scenarios (project_id, name, description, scenario_type, created_by, metadata)\n      VALUES (${project_id}, ${data.name}, ${data.description || null}, ${data.scenario_type}, ${data.created_by || null}, ${JSON.stringify(data.metadata || {})})\n      RETURNING *\n    `;\n        return scenario;\n    }\n    static async getScenarios(type) {\n        if (type) {\n            return await sql`\n        SELECT * FROM scenarios \n        WHERE scenario_type = ${type}\n        ORDER BY created_at DESC\n      `;\n        }\n        return await sql`\n      SELECT * FROM scenarios \n      ORDER BY created_at DESC\n    `;\n    }\n    static async getScenario(id) {\n        const [scenario] = await sql`\n      SELECT * FROM scenarios WHERE id = ${id}\n    `;\n        return scenario || null;\n    }\n    static async updateScenario(id, data) {\n        const [scenario] = await sql`\n      UPDATE scenarios \n      SET name = COALESCE(${data.name}, name),\n          description = COALESCE(${data.description}, description),\n          status = COALESCE(${data.status}, status),\n          metadata = COALESCE(${JSON.stringify(data.metadata)}, metadata),\n          updated_at = CURRENT_TIMESTAMP\n      WHERE id = ${id}\n      RETURNING *\n    `;\n        return scenario;\n    }\n    static async deleteScenario(id) {\n        await sql`DELETE FROM scenarios WHERE id = ${id}`;\n    }\n}\n// Database operations for warehouse configurations\nclass WarehouseConfigService {\n    static async createWarehouseConfig(data) {\n        const [config] = await sql`\n      INSERT INTO warehouse_configurations (\n        scenario_id, warehouse_name, max_capacity, fixed_costs, variable_cost_per_unit,\n        location_latitude, location_longitude, warehouse_type, automation_level, configuration_data\n      )\n      VALUES (\n        ${data.scenario_id}, ${data.warehouse_name}, ${data.max_capacity}, ${data.fixed_costs},\n        ${data.variable_cost_per_unit}, ${data.location_latitude || null}, ${data.location_longitude || null},\n        ${data.warehouse_type}, ${data.automation_level}, ${JSON.stringify(data.configuration_data)}\n      )\n      RETURNING *\n    `;\n        return config;\n    }\n    static async getWarehouseConfigs(scenarioId) {\n        return await sql`\n      SELECT * FROM warehouse_configurations \n      WHERE scenario_id = ${scenarioId}\n      ORDER BY created_at\n    `;\n    }\n    static async updateWarehouseConfig(id, data) {\n        const [config] = await sql`\n      UPDATE warehouse_configurations \n      SET warehouse_name = COALESCE(${data.warehouse_name}, warehouse_name),\n          max_capacity = COALESCE(${data.max_capacity}, max_capacity),\n          fixed_costs = COALESCE(${data.fixed_costs}, fixed_costs),\n          variable_cost_per_unit = COALESCE(${data.variable_cost_per_unit}, variable_cost_per_unit),\n          location_latitude = COALESCE(${data.location_latitude}, location_latitude),\n          location_longitude = COALESCE(${data.location_longitude}, location_longitude),\n          warehouse_type = COALESCE(${data.warehouse_type}, warehouse_type),\n          automation_level = COALESCE(${data.automation_level}, automation_level),\n          configuration_data = COALESCE(${JSON.stringify(data.configuration_data)}, configuration_data)\n      WHERE id = ${id}\n      RETURNING *\n    `;\n        return config;\n    }\n    static async deleteWarehouseConfig(id) {\n        await sql`DELETE FROM warehouse_configurations WHERE id = ${id}`;\n    }\n}\n// Database operations for transport configurations\nclass TransportConfigService {\n    static async createTransportConfig(data) {\n        const [config] = await sql`\n      INSERT INTO transport_configurations (\n        scenario_id, route_name, origin, destination, distance, base_freight_cost,\n        fuel_cost_per_km, transit_time, vehicle_type, capacity, route_data\n      )\n      VALUES (\n        ${data.scenario_id}, ${data.route_name || null}, ${data.origin}, ${data.destination},\n        ${data.distance || null}, ${data.base_freight_cost || null}, ${data.fuel_cost_per_km || null},\n        ${data.transit_time || null}, ${data.vehicle_type}, ${data.capacity || null},\n        ${JSON.stringify(data.route_data)}\n      )\n      RETURNING *\n    `;\n        return config;\n    }\n    static async getTransportConfigs(scenarioId) {\n        return await sql`\n      SELECT * FROM transport_configurations \n      WHERE scenario_id = ${scenarioId}\n      ORDER BY created_at\n    `;\n    }\n    static async updateTransportConfig(id, data) {\n        const [config] = await sql`\n      UPDATE transport_configurations \n      SET route_name = COALESCE(${data.route_name}, route_name),\n          origin = COALESCE(${data.origin}, origin),\n          destination = COALESCE(${data.destination}, destination),\n          distance = COALESCE(${data.distance}, distance),\n          base_freight_cost = COALESCE(${data.base_freight_cost}, base_freight_cost),\n          fuel_cost_per_km = COALESCE(${data.fuel_cost_per_km}, fuel_cost_per_km),\n          transit_time = COALESCE(${data.transit_time}, transit_time),\n          vehicle_type = COALESCE(${data.vehicle_type}, vehicle_type),\n          capacity = COALESCE(${data.capacity}, capacity),\n          route_data = COALESCE(${JSON.stringify(data.route_data)}, route_data)\n      WHERE id = ${id}\n      RETURNING *\n    `;\n        return config;\n    }\n    static async deleteTransportConfig(id) {\n        await sql`DELETE FROM transport_configurations WHERE id = ${id}`;\n    }\n}\n// Database operations for optimization results\nclass OptimizationResultService {\n    static async createOptimizationResult(data) {\n        const [result] = await sql`\n      INSERT INTO optimization_results (\n        scenario_id, result_type, optimization_run_id, status, completed_at,\n        execution_time_seconds, total_cost, cost_savings, efficiency_score,\n        results_data, performance_metrics, recommendations\n      )\n      VALUES (\n        ${data.scenario_id}, ${data.result_type}, ${data.optimization_run_id}, ${data.status},\n        ${data.completed_at || null}, ${data.execution_time_seconds || null}, ${data.total_cost || null},\n        ${data.cost_savings || null}, ${data.efficiency_score || null}, ${JSON.stringify(data.results_data)},\n        ${JSON.stringify(data.performance_metrics)}, ${JSON.stringify(data.recommendations)}\n      )\n      RETURNING *\n    `;\n        return result;\n    }\n    static async getOptimizationResults(scenarioId) {\n        return await sql`\n      SELECT * FROM optimization_results \n      WHERE scenario_id = ${scenarioId}\n      ORDER BY started_at DESC\n    `;\n    }\n    static async updateOptimizationResult(id, data) {\n        const [result] = await sql`\n      UPDATE optimization_results\n      SET status = COALESCE(${data.status}, status),\n          completed_at = COALESCE(${data.completed_at}, completed_at),\n          execution_time_seconds = COALESCE(${data.execution_time_seconds}, execution_time_seconds),\n          total_cost = COALESCE(${data.total_cost}, total_cost),\n          cost_savings = COALESCE(${data.cost_savings}, cost_savings),\n          efficiency_score = COALESCE(${data.efficiency_score}, efficiency_score),\n          results_data = COALESCE(${JSON.stringify(data.results_data)}, results_data),\n          performance_metrics = COALESCE(${JSON.stringify(data.performance_metrics)}, performance_metrics),\n          recommendations = COALESCE(${JSON.stringify(data.recommendations)}, recommendations)\n      WHERE id = ${id}\n      RETURNING *\n    `;\n        return result;\n    }\n    static async updateOptimizationResultByRunId(optimizationRunId, data) {\n        const [result] = await sql`\n      UPDATE optimization_results\n      SET status = COALESCE(${data.status}, status),\n          completed_at = COALESCE(${data.completed_at}, completed_at),\n          execution_time_seconds = COALESCE(${data.execution_time_seconds}, execution_time_seconds),\n          total_cost = COALESCE(${data.total_cost}, total_cost),\n          cost_savings = COALESCE(${data.cost_savings}, cost_savings),\n          efficiency_score = COALESCE(${data.efficiency_score}, efficiency_score),\n          results_data = COALESCE(${JSON.stringify(data.results_data)}, results_data),\n          performance_metrics = COALESCE(${JSON.stringify(data.performance_metrics)}, performance_metrics),\n          recommendations = COALESCE(${JSON.stringify(data.recommendations)}, recommendations)\n      WHERE optimization_run_id = ${optimizationRunId}\n      RETURNING *\n    `;\n        return result;\n    }\n}\n// Database operations for data files\nclass DataFileService {\n    static async createDataFile(data) {\n        const [file] = await sql`\n      INSERT INTO data_files (\n        scenario_id, file_name, file_type, file_size, data_type, processing_status,\n        validation_result, processed_data, original_columns, mapped_columns\n      )\n      VALUES (\n        ${data.scenario_id}, ${data.file_name}, ${data.file_type}, ${data.file_size || null},\n        ${data.data_type}, ${data.processing_status}, ${JSON.stringify(data.validation_result)},\n        ${JSON.stringify(data.processed_data || null)}, ${data.original_columns || null},\n        ${JSON.stringify(data.mapped_columns)}\n      )\n      RETURNING *\n    `;\n        return file;\n    }\n    static async getDataFiles(scenarioId) {\n        return await sql`\n      SELECT * FROM data_files \n      WHERE scenario_id = ${scenarioId}\n      ORDER BY upload_date DESC\n    `;\n    }\n    static async updateDataFile(id, data) {\n        const [file] = await sql`\n      UPDATE data_files\n      SET processing_status = COALESCE(${data.processing_status}, processing_status),\n          validation_result = COALESCE(${JSON.stringify(data.validation_result)}, validation_result),\n          processed_data = COALESCE(${JSON.stringify(data.processed_data)}, processed_data)\n      WHERE id = ${id}\n      RETURNING *\n    `;\n        return file;\n    }\n    static async getDataFile(id) {\n        const [file] = await sql`\n      SELECT * FROM data_files WHERE id = ${id}\n    `;\n        return file || null;\n    }\n    static async deleteDataFile(id) {\n        await sql`DELETE FROM data_files WHERE id = ${id}`;\n    }\n}\n// Database operations for scenario iterations\nclass ScenarioIterationService {\n    static async createIteration(data) {\n        const [iteration] = await sql`\n      INSERT INTO scenario_iterations (\n        parent_scenario_id, iteration_name, iteration_number, changes_description,\n        configuration_changes, results_comparison\n      )\n      VALUES (\n        ${data.parent_scenario_id}, ${data.iteration_name}, ${data.iteration_number},\n        ${data.changes_description || null}, ${JSON.stringify(data.configuration_changes)},\n        ${JSON.stringify(data.results_comparison)}\n      )\n      RETURNING *\n    `;\n        return iteration;\n    }\n    static async getIterations(parentScenarioId) {\n        return await sql`\n      SELECT * FROM scenario_iterations \n      WHERE parent_scenario_id = ${parentScenarioId}\n      ORDER BY iteration_number\n    `;\n    }\n}\n// Audit logging\nclass AuditLogService {\n    static async logAction(data) {\n        await sql`\n      INSERT INTO audit_log (scenario_id, action, entity_type, entity_id, user_id, details, ip_address)\n      VALUES (\n        ${data.scenario_id || null}, ${data.action}, ${data.entity_type || null},\n        ${data.entity_id || null}, ${data.user_id || null}, ${JSON.stringify(data.details)},\n        ${data.ip_address || null}\n      )\n    `;\n    }\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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a0IsQ0FBQyxFQUFFLEVBQUVqRyxLQUFLa0csY0FBYyxDQUFDLEVBQUUsRUFBRWxHLEtBQUttRyxnQkFBZ0IsQ0FBQztRQUM1RSxFQUFFbkcsS0FBS29HLG1CQUFtQixJQUFJLEtBQUssRUFBRSxFQUFFOUUsS0FBS0MsU0FBUyxDQUFDdkIsS0FBS3FHLHFCQUFxQixFQUFFO1FBQ2xGLEVBQUUvRSxLQUFLQyxTQUFTLENBQUN2QixLQUFLc0csa0JBQWtCLEVBQUU7OztJQUc5QyxDQUFDO1FBQ0QsT0FBT047SUFDVDtJQUVBLGFBQWFPLGNBQWNDLGdCQUF3QixFQUFnQztRQUNqRixPQUFPLE1BQU0zRyxHQUFHLENBQUM7O2lDQUVZLEVBQUUyRyxpQkFBaUI7O0lBRWhELENBQUM7SUFDSDtBQUNGO0FBRUEsZ0JBQWdCO0FBQ1QsTUFBTUM7SUFDWCxhQUFhQyxVQUFVMUcsSUFBd0MsRUFBaUI7UUFDOUUsTUFBTUgsR0FBRyxDQUFDOzs7UUFHTixFQUFFRyxLQUFLZ0MsV0FBVyxJQUFJLEtBQUssRUFBRSxFQUFFaEMsS0FBSzJHLE1BQU0sQ0FBQyxFQUFFLEVBQUUzRyxLQUFLNEcsV0FBVyxJQUFJLEtBQUs7UUFDeEUsRUFBRTVHLEtBQUs2RyxTQUFTLElBQUksS0FBSyxFQUFFLEVBQUU3RyxLQUFLOEcsT0FBTyxJQUFJLEtBQUssRUFBRSxFQUFFeEYsS0FBS0MsU0FBUyxDQUFDdkIsS0FBSytHLE9BQU8sRUFBRTtRQUNuRixFQUFFL0csS0FBS2dILFVBQVUsSUFBSSxLQUFLOztJQUU5QixDQUFDO0lBQ0g7QUFDRjtBQUVlIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV0d29yeC1lc3NlbnRpYWxzLy4vbGliL2RhdGFiYXNlLnRzPzRkNDkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgbmVvbiB9IGZyb20gXCJAbmVvbmRhdGFiYXNlL3NlcnZlcmxlc3NcIjtcblxuaWYgKCFwcm9jZXNzLmVudi5EQVRBQkFTRV9VUkwpIHtcbiAgdGhyb3cgbmV3IEVycm9yKFwiREFUQUJBU0VfVVJMIGlzIG5vdCBzZXRcIik7XG59XG5cbmNvbnN0IHNxbCA9IG5lb24ocHJvY2Vzcy5lbnYuREFUQUJBU0VfVVJMKTtcblxuLy8gVHlwZSBkZWZpbml0aW9ucyBmb3IgZGF0YWJhc2UgZW50aXRpZXNcbmV4cG9ydCBpbnRlcmZhY2UgUHJvamVjdCB7XG4gIGlkOiBudW1iZXI7XG4gIG5hbWU6IHN0cmluZztcbiAgZGVzY3JpcHRpb24/OiBzdHJpbmc7XG4gIGNyZWF0ZWRfYXQ6IERhdGU7XG4gIHVwZGF0ZWRfYXQ6IERhdGU7XG4gIHN0YXR1czogJ2FjdGl2ZScgfCAnYXJjaGl2ZWQnIHwgJ2NvbXBsZXRlZCc7XG4gIG93bmVyX2lkPzogc3RyaW5nO1xuICBwcm9qZWN0X2R1cmF0aW9uX3llYXJzOiBudW1iZXI7XG4gIGJhc2VfeWVhcjogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFNjZW5hcmlvIHtcbiAgaWQ6IG51bWJlcjtcbiAgcHJvamVjdF9pZDogbnVtYmVyO1xuICBuYW1lOiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uPzogc3RyaW5nO1xuICBzY2VuYXJpb190eXBlOiAnd2FyZWhvdXNlJyB8ICd0cmFuc3BvcnQnIHwgJ2NvbWJpbmVkJztcbiAgc3RhdHVzOiAnZHJhZnQnIHwgJ3J1bm5pbmcnIHwgJ2NvbXBsZXRlZCcgfCAnZmFpbGVkJztcbiAgY3JlYXRlZF9hdDogRGF0ZTtcbiAgdXBkYXRlZF9hdDogRGF0ZTtcbiAgY3JlYXRlZF9ieT86IHN0cmluZztcbiAgbWV0YWRhdGE6IGFueTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBEYXRhRmlsZSB7XG4gIGlkOiBudW1iZXI7XG4gIHNjZW5hcmlvX2lkOiBudW1iZXI7XG4gIGZpbGVfbmFtZTogc3RyaW5nO1xuICBmaWxlX3R5cGU6IHN0cmluZztcbiAgZmlsZV9zaXplPzogbnVtYmVyO1xuICBkYXRhX3R5cGU6ICdmb3JlY2FzdCcgfCAnc2t1JyB8ICduZXR3b3JrJyB8ICdjb3N0JyB8ICdjYXBhY2l0eSc7XG4gIHVwbG9hZF9kYXRlOiBEYXRlO1xuICBwcm9jZXNzaW5nX3N0YXR1czogJ3BlbmRpbmcnIHwgJ3Byb2Nlc3NpbmcnIHwgJ2NvbXBsZXRlZCcgfCAnZmFpbGVkJztcbiAgdmFsaWRhdGlvbl9yZXN1bHQ6IGFueTtcbiAgcHJvY2Vzc2VkX2RhdGE/OiBhbnk7XG4gIG9yaWdpbmFsX2NvbHVtbnM/OiBzdHJpbmdbXTtcbiAgbWFwcGVkX2NvbHVtbnM6IGFueTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBXYXJlaG91c2VDb25maWd1cmF0aW9uIHtcbiAgaWQ6IG51bWJlcjtcbiAgc2NlbmFyaW9faWQ6IG51bWJlcjtcbiAgd2FyZWhvdXNlX25hbWU6IHN0cmluZztcbiAgbWF4X2NhcGFjaXR5OiBudW1iZXI7XG4gIGZpeGVkX2Nvc3RzOiBudW1iZXI7XG4gIHZhcmlhYmxlX2Nvc3RfcGVyX3VuaXQ6IG51bWJlcjtcbiAgbG9jYXRpb25fbGF0aXR1ZGU/OiBudW1iZXI7XG4gIGxvY2F0aW9uX2xvbmdpdHVkZT86IG51bWJlcjtcbiAgd2FyZWhvdXNlX3R5cGU6ICdkaXN0cmlidXRpb24nIHwgJ2Z1bGZpbGxtZW50JyB8ICdjcm9zcy1kb2NrJztcbiAgYXV0b21hdGlvbl9sZXZlbDogJ21hbnVhbCcgfCAnc2VtaS1hdXRvbWF0ZWQnIHwgJ2Z1bGx5LWF1dG9tYXRlZCc7XG4gIGNyZWF0ZWRfYXQ6IERhdGU7XG4gIGNvbmZpZ3VyYXRpb25fZGF0YTogYW55O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFRyYW5zcG9ydENvbmZpZ3VyYXRpb24ge1xuICBpZDogbnVtYmVyO1xuICBzY2VuYXJpb19pZDogbnVtYmVyO1xuICByb3V0ZV9uYW1lPzogc3RyaW5nO1xuICBvcmlnaW46IHN0cmluZztcbiAgZGVzdGluYXRpb246IHN0cmluZztcbiAgZGlzdGFuY2U/OiBudW1iZXI7XG4gIGJhc2VfZnJlaWdodF9jb3N0PzogbnVtYmVyO1xuICBmdWVsX2Nvc3RfcGVyX2ttPzogbnVtYmVyO1xuICB0cmFuc2l0X3RpbWU/OiBudW1iZXI7XG4gIHZlaGljbGVfdHlwZTogJ3RydWNrJyB8ICdyYWlsJyB8ICdhaXInIHwgJ3NlYSc7XG4gIGNhcGFjaXR5PzogbnVtYmVyO1xuICBjcmVhdGVkX2F0OiBEYXRlO1xuICByb3V0ZV9kYXRhOiBhbnk7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgT3B0aW1pemF0aW9uU2V0dGluZ3Mge1xuICBpZDogbnVtYmVyO1xuICBzY2VuYXJpb19pZDogbnVtYmVyO1xuICBzZXR0aW5nX3R5cGU6ICd3YXJlaG91c2UnIHwgJ3RyYW5zcG9ydCcgfCAnZ2VuZXJhbCc7XG4gIG9iamVjdGl2ZT86IHN0cmluZztcbiAgdGltZV9ob3Jpem9uPzogbnVtYmVyO1xuICBjb25zdHJhaW50czogYW55O1xuICBwYXJhbWV0ZXJzOiBhbnk7XG4gIGNyZWF0ZWRfYXQ6IERhdGU7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgT3B0aW1pemF0aW9uUmVzdWx0IHtcbiAgaWQ6IG51bWJlcjtcbiAgc2NlbmFyaW9faWQ6IG51bWJlcjtcbiAgcmVzdWx0X3R5cGU6ICd3YXJlaG91c2UnIHwgJ3RyYW5zcG9ydCcgfCAnY29tYmluZWQnO1xuICBvcHRpbWl6YXRpb25fcnVuX2lkOiBzdHJpbmc7XG4gIHN0YXR1czogJ3BlbmRpbmcnIHwgJ3F1ZXVlZCcgfCAncnVubmluZycgfCAnY29tcGxldGVkJyB8ICdmYWlsZWQnO1xuICBzdGFydGVkX2F0OiBEYXRlO1xuICBjb21wbGV0ZWRfYXQ/OiBEYXRlO1xuICBleGVjdXRpb25fdGltZV9zZWNvbmRzPzogbnVtYmVyO1xuICB0b3RhbF9jb3N0PzogbnVtYmVyO1xuICBjb3N0X3NhdmluZ3M/OiBudW1iZXI7XG4gIGVmZmljaWVuY3lfc2NvcmU/OiBudW1iZXI7XG4gIHJlc3VsdHNfZGF0YTogYW55O1xuICBwZXJmb3JtYW5jZV9tZXRyaWNzOiBhbnk7XG4gIHJlY29tbWVuZGF0aW9uczogYW55O1xufVxuXG4vLyBFeHRlbmRlZCBpbnRlcmZhY2UgZm9yIEFQSSByZXNwb25zZXMgdGhhdCBpbmNsdWRlcyBjb21wdXRlZCBwcm9wZXJ0aWVzXG5leHBvcnQgaW50ZXJmYWNlIE9wdGltaXphdGlvblJlc3VsdFJlc3BvbnNlIGV4dGVuZHMgT3B0aW1pemF0aW9uUmVzdWx0IHtcbiAgb3B0aW1pemF0aW9uX3Jlc3VsdHM6IGFueTsgLy8gQWxpYXMgZm9yIHJlc3VsdHNfZGF0YVxuICBzdWNjZXNzOiBib29sZWFuOyAvLyBDb21wdXRlZCBmcm9tIHN0YXR1c1xuICBqb2Jfc3RhdHVzPzoge1xuICAgIGlkOiBzdHJpbmc7XG4gICAgc3RhdHVzOiBzdHJpbmc7XG4gICAgcHJvZ3Jlc3NfcGVyY2VudGFnZTogbnVtYmVyO1xuICAgIGN1cnJlbnRfc3RlcDogc3RyaW5nO1xuICAgIGVzdGltYXRlZF9jb21wbGV0aW9uX21pbnV0ZXM6IG51bWJlcjtcbiAgICBlcnJvcl9tZXNzYWdlPzogc3RyaW5nO1xuICB9IHwgbnVsbDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTY2VuYXJpb0l0ZXJhdGlvbiB7XG4gIGlkOiBudW1iZXI7XG4gIHBhcmVudF9zY2VuYXJpb19pZDogbnVtYmVyO1xuICBpdGVyYXRpb25fbmFtZTogc3RyaW5nO1xuICBpdGVyYXRpb25fbnVtYmVyOiBudW1iZXI7XG4gIGNoYW5nZXNfZGVzY3JpcHRpb24/OiBzdHJpbmc7XG4gIGNyZWF0ZWRfYXQ6IERhdGU7XG4gIGNvbmZpZ3VyYXRpb25fY2hhbmdlczogYW55O1xuICByZXN1bHRzX2NvbXBhcmlzb246IGFueTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBWaXN1YWxpemF0aW9uQ29uZmlnIHtcbiAgaWQ6IG51bWJlcjtcbiAgc2NlbmFyaW9faWQ6IG51bWJlcjtcbiAgY29uZmlnX25hbWU6IHN0cmluZztcbiAgY2hhcnRfdHlwZTogc3RyaW5nO1xuICBkYXRhX3NvdXJjZT86IHN0cmluZztcbiAgY2hhcnRfY29uZmlnOiBhbnk7XG4gIGZpbHRlcnM6IGFueTtcbiAgY3JlYXRlZF9hdDogRGF0ZTtcbiAgaXNfZGVmYXVsdDogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBdWRpdExvZyB7XG4gIGlkOiBudW1iZXI7XG4gIHNjZW5hcmlvX2lkPzogbnVtYmVyO1xuICBhY3Rpb246IHN0cmluZztcbiAgZW50aXR5X3R5cGU/OiBzdHJpbmc7XG4gIGVudGl0eV9pZD86IG51bWJlcjtcbiAgdXNlcl9pZD86IHN0cmluZztcbiAgdGltZXN0YW1wOiBEYXRlO1xuICBkZXRhaWxzOiBhbnk7XG4gIGlwX2FkZHJlc3M/OiBzdHJpbmc7XG59XG5cbi8vIERhdGFiYXNlIG9wZXJhdGlvbnMgZm9yIHByb2plY3RzXG5leHBvcnQgY2xhc3MgUHJvamVjdFNlcnZpY2Uge1xuICBzdGF0aWMgYXN5bmMgY3JlYXRlUHJvamVjdChkYXRhOiB7XG4gICAgbmFtZTogc3RyaW5nO1xuICAgIGRlc2NyaXB0aW9uPzogc3RyaW5nO1xuICAgIG93bmVyX2lkPzogc3RyaW5nO1xuICAgIHByb2plY3RfZHVyYXRpb25feWVhcnM/OiBudW1iZXI7XG4gICAgYmFzZV95ZWFyPzogbnVtYmVyO1xuICAgIHN0YXR1cz86ICdhY3RpdmUnIHwgJ2FyY2hpdmVkJyB8ICdjb21wbGV0ZWQnO1xuICB9KTogUHJvbWlzZTxQcm9qZWN0PiB7XG4gICAgY29uc3QgW3Byb2plY3RdID0gYXdhaXQgc3FsYFxuICAgICAgSU5TRVJUIElOVE8gcHJvamVjdHMgKG5hbWUsIGRlc2NyaXB0aW9uLCBvd25lcl9pZCwgcHJvamVjdF9kdXJhdGlvbl95ZWFycywgYmFzZV95ZWFyLCBzdGF0dXMpXG4gICAgICBWQUxVRVMgKCR7ZGF0YS5uYW1lfSwgJHtkYXRhLmRlc2NyaXB0aW9uIHx8IG51bGx9LCAke2RhdGEub3duZXJfaWQgfHwgbnVsbH0sXG4gICAgICAgICAgICAgICR7ZGF0YS5wcm9qZWN0X2R1cmF0aW9uX3llYXJzIHx8IDV9LCAke2RhdGEuYmFzZV95ZWFyIHx8IG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKX0sXG4gICAgICAgICAgICAgICR7ZGF0YS5zdGF0dXMgfHwgJ2FjdGl2ZSd9KVxuICAgICAgUkVUVVJOSU5HICpcbiAgICBgO1xuICAgIHJldHVybiBwcm9qZWN0IGFzIFByb2plY3Q7XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZ2V0UHJvamVjdHMoKTogUHJvbWlzZTxQcm9qZWN0W10+IHtcbiAgICByZXR1cm4gYXdhaXQgc3FsYFxuICAgICAgU0VMRUNUICogRlJPTSBwcm9qZWN0c1xuICAgICAgT1JERVIgQlkgY3JlYXRlZF9hdCBERVNDXG4gICAgYCBhcyBQcm9qZWN0W107XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZ2V0UHJvamVjdChpZDogbnVtYmVyKTogUHJvbWlzZTxQcm9qZWN0IHwgbnVsbD4ge1xuICAgIGNvbnN0IFtwcm9qZWN0XSA9IGF3YWl0IHNxbGBcbiAgICAgIFNFTEVDVCAqIEZST00gcHJvamVjdHMgV0hFUkUgaWQgPSAke2lkfVxuICAgIGA7XG4gICAgcmV0dXJuIHByb2plY3QgYXMgUHJvamVjdCB8fCBudWxsO1xuICB9XG5cbiAgc3RhdGljIGFzeW5jIHVwZGF0ZVByb2plY3QoaWQ6IG51bWJlciwgZGF0YTogUGFydGlhbDxQcm9qZWN0Pik6IFByb21pc2U8UHJvamVjdD4ge1xuICAgIGNvbnN0IFtwcm9qZWN0XSA9IGF3YWl0IHNxbGBcbiAgICAgIFVQREFURSBwcm9qZWN0c1xuICAgICAgU0VUIG5hbWUgPSBDT0FMRVNDRSgke2RhdGEubmFtZX0sIG5hbWUpLFxuICAgICAgICAgIGRlc2NyaXB0aW9uID0gQ09BTEVTQ0UoJHtkYXRhLmRlc2NyaXB0aW9ufSwgZGVzY3JpcHRpb24pLFxuICAgICAgICAgIHN0YXR1cyA9IENPQUxFU0NFKCR7ZGF0YS5zdGF0dXN9LCBzdGF0dXMpLFxuICAgICAgICAgIHByb2plY3RfZHVyYXRpb25feWVhcnMgPSBDT0FMRVNDRSgke2RhdGEucHJvamVjdF9kdXJhdGlvbl95ZWFyc30sIHByb2plY3RfZHVyYXRpb25feWVhcnMpLFxuICAgICAgICAgIGJhc2VfeWVhciA9IENPQUxFU0NFKCR7ZGF0YS5iYXNlX3llYXJ9LCBiYXNlX3llYXIpLFxuICAgICAgICAgIHVwZGF0ZWRfYXQgPSBDVVJSRU5UX1RJTUVTVEFNUFxuICAgICAgV0hFUkUgaWQgPSAke2lkfVxuICAgICAgUkVUVVJOSU5HICpcbiAgICBgO1xuICAgIHJldHVybiBwcm9qZWN0IGFzIFByb2plY3Q7XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZGVsZXRlUHJvamVjdChpZDogbnVtYmVyKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgYXdhaXQgc3FsYERFTEVURSBGUk9NIHByb2plY3RzIFdIRVJFIGlkID0gJHtpZH1gO1xuICB9XG59XG5cbi8vIERhdGFiYXNlIG9wZXJhdGlvbnMgZm9yIHNjZW5hcmlvc1xuZXhwb3J0IGNsYXNzIFNjZW5hcmlvU2VydmljZSB7XG4gIHN0YXRpYyBhc3luYyBjcmVhdGVTY2VuYXJpbyhkYXRhOiB7XG4gICAgbmFtZTogc3RyaW5nO1xuICAgIGRlc2NyaXB0aW9uPzogc3RyaW5nO1xuICAgIHNjZW5hcmlvX3R5cGU6ICd3YXJlaG91c2UnIHwgJ3RyYW5zcG9ydCcgfCAnY29tYmluZWQnO1xuICAgIGNyZWF0ZWRfYnk/OiBzdHJpbmc7XG4gICAgbWV0YWRhdGE/OiBhbnk7XG4gIH0pOiBQcm9taXNlPFNjZW5hcmlvPiB7XG4gICAgLy8gRXh0cmFjdCBwcm9qZWN0X2lkIGZyb20gbWV0YWRhdGEgaWYgcHJlc2VudFxuICAgIGNvbnN0IHByb2plY3RfaWQgPSBkYXRhLm1ldGFkYXRhPy5wcm9qZWN0X2lkO1xuICAgIGlmICghcHJvamVjdF9pZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdwcm9qZWN0X2lkIGlzIHJlcXVpcmVkIGluIG1ldGFkYXRhJyk7XG4gICAgfVxuXG4gICAgY29uc3QgW3NjZW5hcmlvXSA9IGF3YWl0IHNxbGBcbiAgICAgIElOU0VSVCBJTlRPIHNjZW5hcmlvcyAocHJvamVjdF9pZCwgbmFtZSwgZGVzY3JpcHRpb24sIHNjZW5hcmlvX3R5cGUsIGNyZWF0ZWRfYnksIG1ldGFkYXRhKVxuICAgICAgVkFMVUVTICgke3Byb2plY3RfaWR9LCAke2RhdGEubmFtZX0sICR7ZGF0YS5kZXNjcmlwdGlvbiB8fCBudWxsfSwgJHtkYXRhLnNjZW5hcmlvX3R5cGV9LCAke2RhdGEuY3JlYXRlZF9ieSB8fCBudWxsfSwgJHtKU09OLnN0cmluZ2lmeShkYXRhLm1ldGFkYXRhIHx8IHt9KX0pXG4gICAgICBSRVRVUk5JTkcgKlxuICAgIGA7XG4gICAgcmV0dXJuIHNjZW5hcmlvIGFzIFNjZW5hcmlvO1xuICB9XG5cbiAgc3RhdGljIGFzeW5jIGdldFNjZW5hcmlvcyh0eXBlPzogc3RyaW5nKTogUHJvbWlzZTxTY2VuYXJpb1tdPiB7XG4gICAgaWYgKHR5cGUpIHtcbiAgICAgIHJldHVybiBhd2FpdCBzcWxgXG4gICAgICAgIFNFTEVDVCAqIEZST00gc2NlbmFyaW9zIFxuICAgICAgICBXSEVSRSBzY2VuYXJpb190eXBlID0gJHt0eXBlfVxuICAgICAgICBPUkRFUiBCWSBjcmVhdGVkX2F0IERFU0NcbiAgICAgIGAgYXMgU2NlbmFyaW9bXTtcbiAgICB9XG4gICAgcmV0dXJuIGF3YWl0IHNxbGBcbiAgICAgIFNFTEVDVCAqIEZST00gc2NlbmFyaW9zIFxuICAgICAgT1JERVIgQlkgY3JlYXRlZF9hdCBERVNDXG4gICAgYCBhcyBTY2VuYXJpb1tdO1xuICB9XG5cbiAgc3RhdGljIGFzeW5jIGdldFNjZW5hcmlvKGlkOiBudW1iZXIpOiBQcm9taXNlPFNjZW5hcmlvIHwgbnVsbD4ge1xuICAgIGNvbnN0IFtzY2VuYXJpb10gPSBhd2FpdCBzcWxgXG4gICAgICBTRUxFQ1QgKiBGUk9NIHNjZW5hcmlvcyBXSEVSRSBpZCA9ICR7aWR9XG4gICAgYDtcbiAgICByZXR1cm4gc2NlbmFyaW8gYXMgU2NlbmFyaW8gfHwgbnVsbDtcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyB1cGRhdGVTY2VuYXJpbyhpZDogbnVtYmVyLCBkYXRhOiBQYXJ0aWFsPFNjZW5hcmlvPik6IFByb21pc2U8U2NlbmFyaW8+IHtcbiAgICBjb25zdCBbc2NlbmFyaW9dID0gYXdhaXQgc3FsYFxuICAgICAgVVBEQVRFIHNjZW5hcmlvcyBcbiAgICAgIFNFVCBuYW1lID0gQ09BTEVTQ0UoJHtkYXRhLm5hbWV9LCBuYW1lKSxcbiAgICAgICAgICBkZXNjcmlwdGlvbiA9IENPQUxFU0NFKCR7ZGF0YS5kZXNjcmlwdGlvbn0sIGRlc2NyaXB0aW9uKSxcbiAgICAgICAgICBzdGF0dXMgPSBDT0FMRVNDRSgke2RhdGEuc3RhdHVzfSwgc3RhdHVzKSxcbiAgICAgICAgICBtZXRhZGF0YSA9IENPQUxFU0NFKCR7SlNPTi5zdHJpbmdpZnkoZGF0YS5tZXRhZGF0YSl9LCBtZXRhZGF0YSksXG4gICAgICAgICAgdXBkYXRlZF9hdCA9IENVUlJFTlRfVElNRVNUQU1QXG4gICAgICBXSEVSRSBpZCA9ICR7aWR9XG4gICAgICBSRVRVUk5JTkcgKlxuICAgIGA7XG4gICAgcmV0dXJuIHNjZW5hcmlvIGFzIFNjZW5hcmlvO1xuICB9XG5cbiAgc3RhdGljIGFzeW5jIGRlbGV0ZVNjZW5hcmlvKGlkOiBudW1iZXIpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBhd2FpdCBzcWxgREVMRVRFIEZST00gc2NlbmFyaW9zIFdIRVJFIGlkID0gJHtpZH1gO1xuICB9XG59XG5cbi8vIERhdGFiYXNlIG9wZXJhdGlvbnMgZm9yIHdhcmVob3VzZSBjb25maWd1cmF0aW9uc1xuZXhwb3J0IGNsYXNzIFdhcmVob3VzZUNvbmZpZ1NlcnZpY2Uge1xuICBzdGF0aWMgYXN5bmMgY3JlYXRlV2FyZWhvdXNlQ29uZmlnKGRhdGE6IE9taXQ8V2FyZWhvdXNlQ29uZmlndXJhdGlvbiwgJ2lkJyB8ICdjcmVhdGVkX2F0Jz4pOiBQcm9taXNlPFdhcmVob3VzZUNvbmZpZ3VyYXRpb24+IHtcbiAgICBjb25zdCBbY29uZmlnXSA9IGF3YWl0IHNxbGBcbiAgICAgIElOU0VSVCBJTlRPIHdhcmVob3VzZV9jb25maWd1cmF0aW9ucyAoXG4gICAgICAgIHNjZW5hcmlvX2lkLCB3YXJlaG91c2VfbmFtZSwgbWF4X2NhcGFjaXR5LCBmaXhlZF9jb3N0cywgdmFyaWFibGVfY29zdF9wZXJfdW5pdCxcbiAgICAgICAgbG9jYXRpb25fbGF0aXR1ZGUsIGxvY2F0aW9uX2xvbmdpdHVkZSwgd2FyZWhvdXNlX3R5cGUsIGF1dG9tYXRpb25fbGV2ZWwsIGNvbmZpZ3VyYXRpb25fZGF0YVxuICAgICAgKVxuICAgICAgVkFMVUVTIChcbiAgICAgICAgJHtkYXRhLnNjZW5hcmlvX2lkfSwgJHtkYXRhLndhcmVob3VzZV9uYW1lfSwgJHtkYXRhLm1heF9jYXBhY2l0eX0sICR7ZGF0YS5maXhlZF9jb3N0c30sXG4gICAgICAgICR7ZGF0YS52YXJpYWJsZV9jb3N0X3Blcl91bml0fSwgJHtkYXRhLmxvY2F0aW9uX2xhdGl0dWRlIHx8IG51bGx9LCAke2RhdGEubG9jYXRpb25fbG9uZ2l0dWRlIHx8IG51bGx9LFxuICAgICAgICAke2RhdGEud2FyZWhvdXNlX3R5cGV9LCAke2RhdGEuYXV0b21hdGlvbl9sZXZlbH0sICR7SlNPTi5zdHJpbmdpZnkoZGF0YS5jb25maWd1cmF0aW9uX2RhdGEpfVxuICAgICAgKVxuICAgICAgUkVUVVJOSU5HICpcbiAgICBgO1xuICAgIHJldHVybiBjb25maWcgYXMgV2FyZWhvdXNlQ29uZmlndXJhdGlvbjtcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBnZXRXYXJlaG91c2VDb25maWdzKHNjZW5hcmlvSWQ6IG51bWJlcik6IFByb21pc2U8V2FyZWhvdXNlQ29uZmlndXJhdGlvbltdPiB7XG4gICAgcmV0dXJuIGF3YWl0IHNxbGBcbiAgICAgIFNFTEVDVCAqIEZST00gd2FyZWhvdXNlX2NvbmZpZ3VyYXRpb25zIFxuICAgICAgV0hFUkUgc2NlbmFyaW9faWQgPSAke3NjZW5hcmlvSWR9XG4gICAgICBPUkRFUiBCWSBjcmVhdGVkX2F0XG4gICAgYCBhcyBXYXJlaG91c2VDb25maWd1cmF0aW9uW107XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgdXBkYXRlV2FyZWhvdXNlQ29uZmlnKGlkOiBudW1iZXIsIGRhdGE6IFBhcnRpYWw8V2FyZWhvdXNlQ29uZmlndXJhdGlvbj4pOiBQcm9taXNlPFdhcmVob3VzZUNvbmZpZ3VyYXRpb24+IHtcbiAgICBjb25zdCBbY29uZmlnXSA9IGF3YWl0IHNxbGBcbiAgICAgIFVQREFURSB3YXJlaG91c2VfY29uZmlndXJhdGlvbnMgXG4gICAgICBTRVQgd2FyZWhvdXNlX25hbWUgPSBDT0FMRVNDRSgke2RhdGEud2FyZWhvdXNlX25hbWV9LCB3YXJlaG91c2VfbmFtZSksXG4gICAgICAgICAgbWF4X2NhcGFjaXR5ID0gQ09BTEVTQ0UoJHtkYXRhLm1heF9jYXBhY2l0eX0sIG1heF9jYXBhY2l0eSksXG4gICAgICAgICAgZml4ZWRfY29zdHMgPSBDT0FMRVNDRSgke2RhdGEuZml4ZWRfY29zdHN9LCBmaXhlZF9jb3N0cyksXG4gICAgICAgICAgdmFyaWFibGVfY29zdF9wZXJfdW5pdCA9IENPQUxFU0NFKCR7ZGF0YS52YXJpYWJsZV9jb3N0X3Blcl91bml0fSwgdmFyaWFibGVfY29zdF9wZXJfdW5pdCksXG4gICAgICAgICAgbG9jYXRpb25fbGF0aXR1ZGUgPSBDT0FMRVNDRSgke2RhdGEubG9jYXRpb25fbGF0aXR1ZGV9LCBsb2NhdGlvbl9sYXRpdHVkZSksXG4gICAgICAgICAgbG9jYXRpb25fbG9uZ2l0dWRlID0gQ09BTEVTQ0UoJHtkYXRhLmxvY2F0aW9uX2xvbmdpdHVkZX0sIGxvY2F0aW9uX2xvbmdpdHVkZSksXG4gICAgICAgICAgd2FyZWhvdXNlX3R5cGUgPSBDT0FMRVNDRSgke2RhdGEud2FyZWhvdXNlX3R5cGV9LCB3YXJlaG91c2VfdHlwZSksXG4gICAgICAgICAgYXV0b21hdGlvbl9sZXZlbCA9IENPQUxFU0NFKCR7ZGF0YS5hdXRvbWF0aW9uX2xldmVsfSwgYXV0b21hdGlvbl9sZXZlbCksXG4gICAgICAgICAgY29uZmlndXJhdGlvbl9kYXRhID0gQ09BTEVTQ0UoJHtKU09OLnN0cmluZ2lmeShkYXRhLmNvbmZpZ3VyYXRpb25fZGF0YSl9LCBjb25maWd1cmF0aW9uX2RhdGEpXG4gICAgICBXSEVSRSBpZCA9ICR7aWR9XG4gICAgICBSRVRVUk5JTkcgKlxuICAgIGA7XG4gICAgcmV0dXJuIGNvbmZpZyBhcyBXYXJlaG91c2VDb25maWd1cmF0aW9uO1xuICB9XG5cbiAgc3RhdGljIGFzeW5jIGRlbGV0ZVdhcmVob3VzZUNvbmZpZyhpZDogbnVtYmVyKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgYXdhaXQgc3FsYERFTEVURSBGUk9NIHdhcmVob3VzZV9jb25maWd1cmF0aW9ucyBXSEVSRSBpZCA9ICR7aWR9YDtcbiAgfVxufVxuXG4vLyBEYXRhYmFzZSBvcGVyYXRpb25zIGZvciB0cmFuc3BvcnQgY29uZmlndXJhdGlvbnNcbmV4cG9ydCBjbGFzcyBUcmFuc3BvcnRDb25maWdTZXJ2aWNlIHtcbiAgc3RhdGljIGFzeW5jIGNyZWF0ZVRyYW5zcG9ydENvbmZpZyhkYXRhOiBPbWl0PFRyYW5zcG9ydENvbmZpZ3VyYXRpb24sICdpZCcgfCAnY3JlYXRlZF9hdCc+KTogUHJvbWlzZTxUcmFuc3BvcnRDb25maWd1cmF0aW9uPiB7XG4gICAgY29uc3QgW2NvbmZpZ10gPSBhd2FpdCBzcWxgXG4gICAgICBJTlNFUlQgSU5UTyB0cmFuc3BvcnRfY29uZmlndXJhdGlvbnMgKFxuICAgICAgICBzY2VuYXJpb19pZCwgcm91dGVfbmFtZSwgb3JpZ2luLCBkZXN0aW5hdGlvbiwgZGlzdGFuY2UsIGJhc2VfZnJlaWdodF9jb3N0LFxuICAgICAgICBmdWVsX2Nvc3RfcGVyX2ttLCB0cmFuc2l0X3RpbWUsIHZlaGljbGVfdHlwZSwgY2FwYWNpdHksIHJvdXRlX2RhdGFcbiAgICAgIClcbiAgICAgIFZBTFVFUyAoXG4gICAgICAgICR7ZGF0YS5zY2VuYXJpb19pZH0sICR7ZGF0YS5yb3V0ZV9uYW1lIHx8IG51bGx9LCAke2RhdGEub3JpZ2lufSwgJHtkYXRhLmRlc3RpbmF0aW9ufSxcbiAgICAgICAgJHtkYXRhLmRpc3RhbmNlIHx8IG51bGx9LCAke2RhdGEuYmFzZV9mcmVpZ2h0X2Nvc3QgfHwgbnVsbH0sICR7ZGF0YS5mdWVsX2Nvc3RfcGVyX2ttIHx8IG51bGx9LFxuICAgICAgICAke2RhdGEudHJhbnNpdF90aW1lIHx8IG51bGx9LCAke2RhdGEudmVoaWNsZV90eXBlfSwgJHtkYXRhLmNhcGFjaXR5IHx8IG51bGx9LFxuICAgICAgICAke0pTT04uc3RyaW5naWZ5KGRhdGEucm91dGVfZGF0YSl9XG4gICAgICApXG4gICAgICBSRVRVUk5JTkcgKlxuICAgIGA7XG4gICAgcmV0dXJuIGNvbmZpZyBhcyBUcmFuc3BvcnRDb25maWd1cmF0aW9uO1xuICB9XG5cbiAgc3RhdGljIGFzeW5jIGdldFRyYW5zcG9ydENvbmZpZ3Moc2NlbmFyaW9JZDogbnVtYmVyKTogUHJvbWlzZTxUcmFuc3BvcnRDb25maWd1cmF0aW9uW10+IHtcbiAgICByZXR1cm4gYXdhaXQgc3FsYFxuICAgICAgU0VMRUNUICogRlJPTSB0cmFuc3BvcnRfY29uZmlndXJhdGlvbnMgXG4gICAgICBXSEVSRSBzY2VuYXJpb19pZCA9ICR7c2NlbmFyaW9JZH1cbiAgICAgIE9SREVSIEJZIGNyZWF0ZWRfYXRcbiAgICBgIGFzIFRyYW5zcG9ydENvbmZpZ3VyYXRpb25bXTtcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyB1cGRhdGVUcmFuc3BvcnRDb25maWcoaWQ6IG51bWJlciwgZGF0YTogUGFydGlhbDxUcmFuc3BvcnRDb25maWd1cmF0aW9uPik6IFByb21pc2U8VHJhbnNwb3J0Q29uZmlndXJhdGlvbj4ge1xuICAgIGNvbnN0IFtjb25maWddID0gYXdhaXQgc3FsYFxuICAgICAgVVBEQVRFIHRyYW5zcG9ydF9jb25maWd1cmF0aW9ucyBcbiAgICAgIFNFVCByb3V0ZV9uYW1lID0gQ09BTEVTQ0UoJHtkYXRhLnJvdXRlX25hbWV9LCByb3V0ZV9uYW1lKSxcbiAgICAgICAgICBvcmlnaW4gPSBDT0FMRVNDRSgke2RhdGEub3JpZ2lufSwgb3JpZ2luKSxcbiAgICAgICAgICBkZXN0aW5hdGlvbiA9IENPQUxFU0NFKCR7ZGF0YS5kZXN0aW5hdGlvbn0sIGRlc3RpbmF0aW9uKSxcbiAgICAgICAgICBkaXN0YW5jZSA9IENPQUxFU0NFKCR7ZGF0YS5kaXN0YW5jZX0sIGRpc3RhbmNlKSxcbiAgICAgICAgICBiYXNlX2ZyZWlnaHRfY29zdCA9IENPQUxFU0NFKCR7ZGF0YS5iYXNlX2ZyZWlnaHRfY29zdH0sIGJhc2VfZnJlaWdodF9jb3N0KSxcbiAgICAgICAgICBmdWVsX2Nvc3RfcGVyX2ttID0gQ09BTEVTQ0UoJHtkYXRhLmZ1ZWxfY29zdF9wZXJfa219LCBmdWVsX2Nvc3RfcGVyX2ttKSxcbiAgICAgICAgICB0cmFuc2l0X3RpbWUgPSBDT0FMRVNDRSgke2RhdGEudHJhbnNpdF90aW1lfSwgdHJhbnNpdF90aW1lKSxcbiAgICAgICAgICB2ZWhpY2xlX3R5cGUgPSBDT0FMRVNDRSgke2RhdGEudmVoaWNsZV90eXBlfSwgdmVoaWNsZV90eXBlKSxcbiAgICAgICAgICBjYXBhY2l0eSA9IENPQUxFU0NFKCR7ZGF0YS5jYXBhY2l0eX0sIGNhcGFjaXR5KSxcbiAgICAgICAgICByb3V0ZV9kYXRhID0gQ09BTEVTQ0UoJHtKU09OLnN0cmluZ2lmeShkYXRhLnJvdXRlX2RhdGEpfSwgcm91dGVfZGF0YSlcbiAgICAgIFdIRVJFIGlkID0gJHtpZH1cbiAgICAgIFJFVFVSTklORyAqXG4gICAgYDtcbiAgICByZXR1cm4gY29uZmlnIGFzIFRyYW5zcG9ydENvbmZpZ3VyYXRpb247XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZGVsZXRlVHJhbnNwb3J0Q29uZmlnKGlkOiBudW1iZXIpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBhd2FpdCBzcWxgREVMRVRFIEZST00gdHJhbnNwb3J0X2NvbmZpZ3VyYXRpb25zIFdIRVJFIGlkID0gJHtpZH1gO1xuICB9XG59XG5cbi8vIERhdGFiYXNlIG9wZXJhdGlvbnMgZm9yIG9wdGltaXphdGlvbiByZXN1bHRzXG5leHBvcnQgY2xhc3MgT3B0aW1pemF0aW9uUmVzdWx0U2VydmljZSB7XG4gIHN0YXRpYyBhc3luYyBjcmVhdGVPcHRpbWl6YXRpb25SZXN1bHQoZGF0YTogT21pdDxPcHRpbWl6YXRpb25SZXN1bHQsICdpZCcgfCAnc3RhcnRlZF9hdCc+KTogUHJvbWlzZTxPcHRpbWl6YXRpb25SZXN1bHQ+IHtcbiAgICBjb25zdCBbcmVzdWx0XSA9IGF3YWl0IHNxbGBcbiAgICAgIElOU0VSVCBJTlRPIG9wdGltaXphdGlvbl9yZXN1bHRzIChcbiAgICAgICAgc2NlbmFyaW9faWQsIHJlc3VsdF90eXBlLCBvcHRpbWl6YXRpb25fcnVuX2lkLCBzdGF0dXMsIGNvbXBsZXRlZF9hdCxcbiAgICAgICAgZXhlY3V0aW9uX3RpbWVfc2Vjb25kcywgdG90YWxfY29zdCwgY29zdF9zYXZpbmdzLCBlZmZpY2llbmN5X3Njb3JlLFxuICAgICAgICByZXN1bHRzX2RhdGEsIHBlcmZvcm1hbmNlX21ldHJpY3MsIHJlY29tbWVuZGF0aW9uc1xuICAgICAgKVxuICAgICAgVkFMVUVTIChcbiAgICAgICAgJHtkYXRhLnNjZW5hcmlvX2lkfSwgJHtkYXRhLnJlc3VsdF90eXBlfSwgJHtkYXRhLm9wdGltaXphdGlvbl9ydW5faWR9LCAke2RhdGEuc3RhdHVzfSxcbiAgICAgICAgJHtkYXRhLmNvbXBsZXRlZF9hdCB8fCBudWxsfSwgJHtkYXRhLmV4ZWN1dGlvbl90aW1lX3NlY29uZHMgfHwgbnVsbH0sICR7ZGF0YS50b3RhbF9jb3N0IHx8IG51bGx9LFxuICAgICAgICAke2RhdGEuY29zdF9zYXZpbmdzIHx8IG51bGx9LCAke2RhdGEuZWZmaWNpZW5jeV9zY29yZSB8fCBudWxsfSwgJHtKU09OLnN0cmluZ2lmeShkYXRhLnJlc3VsdHNfZGF0YSl9LFxuICAgICAgICAke0pTT04uc3RyaW5naWZ5KGRhdGEucGVyZm9ybWFuY2VfbWV0cmljcyl9LCAke0pTT04uc3RyaW5naWZ5KGRhdGEucmVjb21tZW5kYXRpb25zKX1cbiAgICAgIClcbiAgICAgIFJFVFVSTklORyAqXG4gICAgYDtcbiAgICByZXR1cm4gcmVzdWx0IGFzIE9wdGltaXphdGlvblJlc3VsdDtcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBnZXRPcHRpbWl6YXRpb25SZXN1bHRzKHNjZW5hcmlvSWQ6IG51bWJlcik6IFByb21pc2U8T3B0aW1pemF0aW9uUmVzdWx0W10+IHtcbiAgICByZXR1cm4gYXdhaXQgc3FsYFxuICAgICAgU0VMRUNUICogRlJPTSBvcHRpbWl6YXRpb25fcmVzdWx0cyBcbiAgICAgIFdIRVJFIHNjZW5hcmlvX2lkID0gJHtzY2VuYXJpb0lkfVxuICAgICAgT1JERVIgQlkgc3RhcnRlZF9hdCBERVNDXG4gICAgYCBhcyBPcHRpbWl6YXRpb25SZXN1bHRbXTtcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyB1cGRhdGVPcHRpbWl6YXRpb25SZXN1bHQoaWQ6IG51bWJlciwgZGF0YTogUGFydGlhbDxPcHRpbWl6YXRpb25SZXN1bHQ+KTogUHJvbWlzZTxPcHRpbWl6YXRpb25SZXN1bHQ+IHtcbiAgICBjb25zdCBbcmVzdWx0XSA9IGF3YWl0IHNxbGBcbiAgICAgIFVQREFURSBvcHRpbWl6YXRpb25fcmVzdWx0c1xuICAgICAgU0VUIHN0YXR1cyA9IENPQUxFU0NFKCR7ZGF0YS5zdGF0dXN9LCBzdGF0dXMpLFxuICAgICAgICAgIGNvbXBsZXRlZF9hdCA9IENPQUxFU0NFKCR7ZGF0YS5jb21wbGV0ZWRfYXR9LCBjb21wbGV0ZWRfYXQpLFxuICAgICAgICAgIGV4ZWN1dGlvbl90aW1lX3NlY29uZHMgPSBDT0FMRVNDRSgke2RhdGEuZXhlY3V0aW9uX3RpbWVfc2Vjb25kc30sIGV4ZWN1dGlvbl90aW1lX3NlY29uZHMpLFxuICAgICAgICAgIHRvdGFsX2Nvc3QgPSBDT0FMRVNDRSgke2RhdGEudG90YWxfY29zdH0sIHRvdGFsX2Nvc3QpLFxuICAgICAgICAgIGNvc3Rfc2F2aW5ncyA9IENPQUxFU0NFKCR7ZGF0YS5jb3N0X3NhdmluZ3N9LCBjb3N0X3NhdmluZ3MpLFxuICAgICAgICAgIGVmZmljaWVuY3lfc2NvcmUgPSBDT0FMRVNDRSgke2RhdGEuZWZmaWNpZW5jeV9zY29yZX0sIGVmZmljaWVuY3lfc2NvcmUpLFxuICAgICAgICAgIHJlc3VsdHNfZGF0YSA9IENPQUxFU0NFKCR7SlNPTi5zdHJpbmdpZnkoZGF0YS5yZXN1bHRzX2RhdGEpfSwgcmVzdWx0c19kYXRhKSxcbiAgICAgICAgICBwZXJmb3JtYW5jZV9tZXRyaWNzID0gQ09BTEVTQ0UoJHtKU09OLnN0cmluZ2lmeShkYXRhLnBlcmZvcm1hbmNlX21ldHJpY3MpfSwgcGVyZm9ybWFuY2VfbWV0cmljcyksXG4gICAgICAgICAgcmVjb21tZW5kYXRpb25zID0gQ09BTEVTQ0UoJHtKU09OLnN0cmluZ2lmeShkYXRhLnJlY29tbWVuZGF0aW9ucyl9LCByZWNvbW1lbmRhdGlvbnMpXG4gICAgICBXSEVSRSBpZCA9ICR7aWR9XG4gICAgICBSRVRVUk5JTkcgKlxuICAgIGA7XG4gICAgcmV0dXJuIHJlc3VsdCBhcyBPcHRpbWl6YXRpb25SZXN1bHQ7XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgdXBkYXRlT3B0aW1pemF0aW9uUmVzdWx0QnlSdW5JZChvcHRpbWl6YXRpb25SdW5JZDogc3RyaW5nLCBkYXRhOiBQYXJ0aWFsPE9wdGltaXphdGlvblJlc3VsdD4pOiBQcm9taXNlPE9wdGltaXphdGlvblJlc3VsdD4ge1xuICAgIGNvbnN0IFtyZXN1bHRdID0gYXdhaXQgc3FsYFxuICAgICAgVVBEQVRFIG9wdGltaXphdGlvbl9yZXN1bHRzXG4gICAgICBTRVQgc3RhdHVzID0gQ09BTEVTQ0UoJHtkYXRhLnN0YXR1c30sIHN0YXR1cyksXG4gICAgICAgICAgY29tcGxldGVkX2F0ID0gQ09BTEVTQ0UoJHtkYXRhLmNvbXBsZXRlZF9hdH0sIGNvbXBsZXRlZF9hdCksXG4gICAgICAgICAgZXhlY3V0aW9uX3RpbWVfc2Vjb25kcyA9IENPQUxFU0NFKCR7ZGF0YS5leGVjdXRpb25fdGltZV9zZWNvbmRzfSwgZXhlY3V0aW9uX3RpbWVfc2Vjb25kcyksXG4gICAgICAgICAgdG90YWxfY29zdCA9IENPQUxFU0NFKCR7ZGF0YS50b3RhbF9jb3N0fSwgdG90YWxfY29zdCksXG4gICAgICAgICAgY29zdF9zYXZpbmdzID0gQ09BTEVTQ0UoJHtkYXRhLmNvc3Rfc2F2aW5nc30sIGNvc3Rfc2F2aW5ncyksXG4gICAgICAgICAgZWZmaWNpZW5jeV9zY29yZSA9IENPQUxFU0NFKCR7ZGF0YS5lZmZpY2llbmN5X3Njb3JlfSwgZWZmaWNpZW5jeV9zY29yZSksXG4gICAgICAgICAgcmVzdWx0c19kYXRhID0gQ09BTEVTQ0UoJHtKU09OLnN0cmluZ2lmeShkYXRhLnJlc3VsdHNfZGF0YSl9LCByZXN1bHRzX2RhdGEpLFxuICAgICAgICAgIHBlcmZvcm1hbmNlX21ldHJpY3MgPSBDT0FMRVNDRSgke0pTT04uc3RyaW5naWZ5KGRhdGEucGVyZm9ybWFuY2VfbWV0cmljcyl9LCBwZXJmb3JtYW5jZV9tZXRyaWNzKSxcbiAgICAgICAgICByZWNvbW1lbmRhdGlvbnMgPSBDT0FMRVNDRSgke0pTT04uc3RyaW5naWZ5KGRhdGEucmVjb21tZW5kYXRpb25zKX0sIHJlY29tbWVuZGF0aW9ucylcbiAgICAgIFdIRVJFIG9wdGltaXphdGlvbl9ydW5faWQgPSAke29wdGltaXphdGlvblJ1bklkfVxuICAgICAgUkVUVVJOSU5HICpcbiAgICBgO1xuICAgIHJldHVybiByZXN1bHQgYXMgT3B0aW1pemF0aW9uUmVzdWx0O1xuICB9XG59XG5cbi8vIERhdGFiYXNlIG9wZXJhdGlvbnMgZm9yIGRhdGEgZmlsZXNcbmV4cG9ydCBjbGFzcyBEYXRhRmlsZVNlcnZpY2Uge1xuICBzdGF0aWMgYXN5bmMgY3JlYXRlRGF0YUZpbGUoZGF0YTogT21pdDxEYXRhRmlsZSwgJ2lkJyB8ICd1cGxvYWRfZGF0ZSc+KTogUHJvbWlzZTxEYXRhRmlsZT4ge1xuICAgIGNvbnN0IFtmaWxlXSA9IGF3YWl0IHNxbGBcbiAgICAgIElOU0VSVCBJTlRPIGRhdGFfZmlsZXMgKFxuICAgICAgICBzY2VuYXJpb19pZCwgZmlsZV9uYW1lLCBmaWxlX3R5cGUsIGZpbGVfc2l6ZSwgZGF0YV90eXBlLCBwcm9jZXNzaW5nX3N0YXR1cyxcbiAgICAgICAgdmFsaWRhdGlvbl9yZXN1bHQsIHByb2Nlc3NlZF9kYXRhLCBvcmlnaW5hbF9jb2x1bW5zLCBtYXBwZWRfY29sdW1uc1xuICAgICAgKVxuICAgICAgVkFMVUVTIChcbiAgICAgICAgJHtkYXRhLnNjZW5hcmlvX2lkfSwgJHtkYXRhLmZpbGVfbmFtZX0sICR7ZGF0YS5maWxlX3R5cGV9LCAke2RhdGEuZmlsZV9zaXplIHx8IG51bGx9LFxuICAgICAgICAke2RhdGEuZGF0YV90eXBlfSwgJHtkYXRhLnByb2Nlc3Npbmdfc3RhdHVzfSwgJHtKU09OLnN0cmluZ2lmeShkYXRhLnZhbGlkYXRpb25fcmVzdWx0KX0sXG4gICAgICAgICR7SlNPTi5zdHJpbmdpZnkoZGF0YS5wcm9jZXNzZWRfZGF0YSB8fCBudWxsKX0sICR7ZGF0YS5vcmlnaW5hbF9jb2x1bW5zIHx8IG51bGx9LFxuICAgICAgICAke0pTT04uc3RyaW5naWZ5KGRhdGEubWFwcGVkX2NvbHVtbnMpfVxuICAgICAgKVxuICAgICAgUkVUVVJOSU5HICpcbiAgICBgO1xuICAgIHJldHVybiBmaWxlIGFzIERhdGFGaWxlO1xuICB9XG5cbiAgc3RhdGljIGFzeW5jIGdldERhdGFGaWxlcyhzY2VuYXJpb0lkOiBudW1iZXIpOiBQcm9taXNlPERhdGFGaWxlW10+IHtcbiAgICByZXR1cm4gYXdhaXQgc3FsYFxuICAgICAgU0VMRUNUICogRlJPTSBkYXRhX2ZpbGVzIFxuICAgICAgV0hFUkUgc2NlbmFyaW9faWQgPSAke3NjZW5hcmlvSWR9XG4gICAgICBPUkRFUiBCWSB1cGxvYWRfZGF0ZSBERVNDXG4gICAgYCBhcyBEYXRhRmlsZVtdO1xuICB9XG5cbiAgc3RhdGljIGFzeW5jIHVwZGF0ZURhdGFGaWxlKGlkOiBudW1iZXIsIGRhdGE6IFBhcnRpYWw8RGF0YUZpbGU+KTogUHJvbWlzZTxEYXRhRmlsZT4ge1xuICAgIGNvbnN0IFtmaWxlXSA9IGF3YWl0IHNxbGBcbiAgICAgIFVQREFURSBkYXRhX2ZpbGVzXG4gICAgICBTRVQgcHJvY2Vzc2luZ19zdGF0dXMgPSBDT0FMRVNDRSgke2RhdGEucHJvY2Vzc2luZ19zdGF0dXN9LCBwcm9jZXNzaW5nX3N0YXR1cyksXG4gICAgICAgICAgdmFsaWRhdGlvbl9yZXN1bHQgPSBDT0FMRVNDRSgke0pTT04uc3RyaW5naWZ5KGRhdGEudmFsaWRhdGlvbl9yZXN1bHQpfSwgdmFsaWRhdGlvbl9yZXN1bHQpLFxuICAgICAgICAgIHByb2Nlc3NlZF9kYXRhID0gQ09BTEVTQ0UoJHtKU09OLnN0cmluZ2lmeShkYXRhLnByb2Nlc3NlZF9kYXRhKX0sIHByb2Nlc3NlZF9kYXRhKVxuICAgICAgV0hFUkUgaWQgPSAke2lkfVxuICAgICAgUkVUVVJOSU5HICpcbiAgICBgO1xuICAgIHJldHVybiBmaWxlIGFzIERhdGFGaWxlO1xuICB9XG5cbiAgc3RhdGljIGFzeW5jIGdldERhdGFGaWxlKGlkOiBudW1iZXIpOiBQcm9taXNlPERhdGFGaWxlIHwgbnVsbD4ge1xuICAgIGNvbnN0IFtmaWxlXSA9IGF3YWl0IHNxbGBcbiAgICAgIFNFTEVDVCAqIEZST00gZGF0YV9maWxlcyBXSEVSRSBpZCA9ICR7aWR9XG4gICAgYDtcbiAgICByZXR1cm4gZmlsZSBhcyBEYXRhRmlsZSB8fCBudWxsO1xuICB9XG5cbiAgc3RhdGljIGFzeW5jIGRlbGV0ZURhdGFGaWxlKGlkOiBudW1iZXIpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBhd2FpdCBzcWxgREVMRVRFIEZST00gZGF0YV9maWxlcyBXSEVSRSBpZCA9ICR7aWR9YDtcbiAgfVxufVxuXG4vLyBEYXRhYmFzZSBvcGVyYXRpb25zIGZvciBzY2VuYXJpbyBpdGVyYXRpb25zXG5leHBvcnQgY2xhc3MgU2NlbmFyaW9JdGVyYXRpb25TZXJ2aWNlIHtcbiAgc3RhdGljIGFzeW5jIGNyZWF0ZUl0ZXJhdGlvbihkYXRhOiBPbWl0PFNjZW5hcmlvSXRlcmF0aW9uLCAnaWQnIHwgJ2NyZWF0ZWRfYXQnPik6IFByb21pc2U8U2NlbmFyaW9JdGVyYXRpb24+IHtcbiAgICBjb25zdCBbaXRlcmF0aW9uXSA9IGF3YWl0IHNxbGBcbiAgICAgIElOU0VSVCBJTlRPIHNjZW5hcmlvX2l0ZXJhdGlvbnMgKFxuICAgICAgICBwYXJlbnRfc2NlbmFyaW9faWQsIGl0ZXJhdGlvbl9uYW1lLCBpdGVyYXRpb25fbnVtYmVyLCBjaGFuZ2VzX2Rlc2NyaXB0aW9uLFxuICAgICAgICBjb25maWd1cmF0aW9uX2NoYW5nZXMsIHJlc3VsdHNfY29tcGFyaXNvblxuICAgICAgKVxuICAgICAgVkFMVUVTIChcbiAgICAgICAgJHtkYXRhLnBhcmVudF9zY2VuYXJpb19pZH0sICR7ZGF0YS5pdGVyYXRpb25fbmFtZX0sICR7ZGF0YS5pdGVyYXRpb25fbnVtYmVyfSxcbiAgICAgICAgJHtkYXRhLmNoYW5nZXNfZGVzY3JpcHRpb24gfHwgbnVsbH0sICR7SlNPTi5zdHJpbmdpZnkoZGF0YS5jb25maWd1cmF0aW9uX2NoYW5nZXMpfSxcbiAgICAgICAgJHtKU09OLnN0cmluZ2lmeShkYXRhLnJlc3VsdHNfY29tcGFyaXNvbil9XG4gICAgICApXG4gICAgICBSRVRVUk5JTkcgKlxuICAgIGA7XG4gICAgcmV0dXJuIGl0ZXJhdGlvbiBhcyBTY2VuYXJpb0l0ZXJhdGlvbjtcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBnZXRJdGVyYXRpb25zKHBhcmVudFNjZW5hcmlvSWQ6IG51bWJlcik6IFByb21pc2U8U2NlbmFyaW9JdGVyYXRpb25bXT4ge1xuICAgIHJldHVybiBhd2FpdCBzcWxgXG4gICAgICBTRUxFQ1QgKiBGUk9NIHNjZW5hcmlvX2l0ZXJhdGlvbnMgXG4gICAgICBXSEVSRSBwYXJlbnRfc2NlbmFyaW9faWQgPSAke3BhcmVudFNjZW5hcmlvSWR9XG4gICAgICBPUkRFUiBCWSBpdGVyYXRpb25fbnVtYmVyXG4gICAgYCBhcyBTY2VuYXJpb0l0ZXJhdGlvbltdO1xuICB9XG59XG5cbi8vIEF1ZGl0IGxvZ2dpbmdcbmV4cG9ydCBjbGFzcyBBdWRpdExvZ1NlcnZpY2Uge1xuICBzdGF0aWMgYXN5bmMgbG9nQWN0aW9uKGRhdGE6IE9taXQ8QXVkaXRMb2csICdpZCcgfCAndGltZXN0YW1wJz4pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBhd2FpdCBzcWxgXG4gICAgICBJTlNFUlQgSU5UTyBhdWRpdF9sb2cgKHNjZW5hcmlvX2lkLCBhY3Rpb24sIGVudGl0eV90eXBlLCBlbnRpdHlfaWQsIHVzZXJfaWQsIGRldGFpbHMsIGlwX2FkZHJlc3MpXG4gICAgICBWQUxVRVMgKFxuICAgICAgICAke2RhdGEuc2NlbmFyaW9faWQgfHwgbnVsbH0sICR7ZGF0YS5hY3Rpb259LCAke2RhdGEuZW50aXR5X3R5cGUgfHwgbnVsbH0sXG4gICAgICAgICR7ZGF0YS5lbnRpdHlfaWQgfHwgbnVsbH0sICR7ZGF0YS51c2VyX2lkIHx8IG51bGx9LCAke0pTT04uc3RyaW5naWZ5KGRhdGEuZGV0YWlscyl9LFxuICAgICAgICAke2RhdGEuaXBfYWRkcmVzcyB8fCBudWxsfVxuICAgICAgKVxuICAgIGA7XG4gIH1cbn1cblxuZXhwb3J0IHsgc3FsIH07XG4iXSwibmFtZXMiOlsibmVvbiIsInByb2Nlc3MiLCJlbnYiLCJEQVRBQkFTRV9VUkwiLCJFcnJvciIsInNxbCIsIlByb2plY3RTZXJ2aWNlIiwiY3JlYXRlUHJvamVjdCIsImRhdGEiLCJwcm9qZWN0IiwibmFtZSIsImRlc2NyaXB0aW9uIiwib3duZXJfaWQiLCJwcm9qZWN0X2R1cmF0aW9uX3llYXJzIiwiYmFzZV95ZWFyIiwiRGF0ZSIsImdldEZ1bGxZZWFyIiwic3RhdHVzIiwiZ2V0UHJvamVjdHMiLCJnZXRQcm9qZWN0IiwiaWQiLCJ1cGRhdGVQcm9qZWN0IiwiZGVsZXRlUHJvamVjdCIsIlNjZW5hcmlvU2VydmljZSIsImNyZWF0ZVNjZW5hcmlvIiwicHJvamVjdF9pZCIsIm1ldGFkYXRhIiwic2NlbmFyaW8iLCJzY2VuYXJpb190eXBlIiwiY3JlYXRlZF9ieSIsIkpTT04iLCJzdHJpbmdpZnkiLCJnZXRTY2VuYXJpb3MiLCJ0eXBlIiwiZ2V0U2NlbmFyaW8iLCJ1cGRhdGVTY2VuYXJpbyIsImRlbGV0ZVNjZW5hcmlvIiwiV2FyZWhvdXNlQ29uZmlnU2VydmljZSIsImNyZWF0ZVdhcmVob3VzZUNvbmZpZyIsImNvbmZpZyIsInNjZW5hcmlvX2lkIiwid2FyZWhvdXNlX25hbWUiLCJtYXhfY2FwYWNpdHkiLCJmaXhlZF9jb3N0cyIsInZhcmlhYmxlX2Nvc3RfcGVyX3VuaXQiLCJsb2NhdGlvbl9sYXRpdHVkZSIsImxvY2F0aW9uX2xvbmdpdHVkZSIsIndhcmVob3VzZV90eXBlIiwiYXV0b21hdGlvbl9sZXZlbCIsImNvbmZpZ3VyYXRpb25fZGF0YSIsImdldFdhcmVob3VzZUNvbmZpZ3MiLCJzY2VuYXJpb0lkIiwidXBkYXRlV2FyZWhvdXNlQ29uZmlnIiwiZGVsZXRlV2FyZWhvdXNlQ29uZmlnIiwiVHJhbnNwb3J0Q29uZmlnU2VydmljZSIsImNyZWF0ZVRyYW5zcG9ydENvbmZpZyIsInJvdXRlX25hbWUiLCJvcmlnaW4iLCJkZXN0aW5hdGlvbiIsImRpc3RhbmNlIiwiYmFzZV9mcmVpZ2h0X2Nvc3QiLCJmdWVsX2Nvc3RfcGVyX2ttIiwidHJhbnNpdF90aW1lIiwidmVoaWNsZV90eXBlIiwiY2FwYWNpdHkiLCJyb3V0ZV9kYXRhIiwiZ2V0VHJhbnNwb3J0Q29uZmlncyIsInVwZGF0ZVRyYW5zcG9ydENvbmZpZyIsImRlbGV0ZVRyYW5zcG9ydENvbmZpZyIsIk9wdGltaXphdGlvblJlc3VsdFNlcnZpY2UiLCJjcmVhdGVPcHRpbWl6YXRpb25SZXN1bHQiLCJyZXN1bHQiLCJyZXN1bHRfdHlwZSIsIm9wdGltaXphdGlvbl9ydW5faWQiLCJjb21wbGV0ZWRfYXQiLCJleGVjdXRpb25fdGltZV9zZWNvbmRzIiwidG90YWxfY29zdCIsImNvc3Rfc2F2aW5ncyIsImVmZmljaWVuY3lfc2NvcmUiLCJyZXN1bHRzX2RhdGEiLCJwZXJmb3JtYW5jZV9tZXRyaWNzIiwicmVjb21tZW5kYXRpb25zIiwiZ2V0T3B0aW1pemF0aW9uUmVzdWx0cyIsInVwZGF0ZU9wdGltaXphdGlvblJlc3VsdCIsInVwZGF0ZU9wdGltaXphdGlvblJlc3VsdEJ5UnVuSWQiLCJvcHRpbWl6YXRpb25SdW5JZCIsIkRhdGFGaWxlU2VydmljZSIsImNyZWF0ZURhdGFGaWxlIiwiZmlsZSIsImZpbGVfbmFtZSIsImZpbGVfdHlwZSIsImZpbGVfc2l6ZSIsImRhdGFfdHlwZSIsInByb2Nlc3Npbmdfc3RhdHVzIiwidmFsaWRhdGlvbl9yZXN1bHQiLCJwcm9jZXNzZWRfZGF0YSIsIm9yaWdpbmFsX2NvbHVtbnMiLCJtYXBwZWRfY29sdW1ucyIsImdldERhdGFGaWxlcyIsInVwZGF0ZURhdGFGaWxlIiwiZ2V0RGF0YUZpbGUiLCJkZWxldGVEYXRhRmlsZSIsIlNjZW5hcmlvSXRlcmF0aW9uU2VydmljZSIsImNyZWF0ZUl0ZXJhdGlvbiIsIml0ZXJhdGlvbiIsInBhcmVudF9zY2VuYXJpb19pZCIsIml0ZXJhdGlvbl9uYW1lIiwiaXRlcmF0aW9uX251bWJlciIsImNoYW5nZXNfZGVzY3JpcHRpb24iLCJjb25maWd1cmF0aW9uX2NoYW5nZXMiLCJyZXN1bHRzX2NvbXBhcmlzb24iLCJnZXRJdGVyYXRpb25zIiwicGFyZW50U2NlbmFyaW9JZCIsIkF1ZGl0TG9nU2VydmljZSIsImxvZ0FjdGlvbiIsImFjdGlvbiIsImVudGl0eV90eXBlIiwiZW50aXR5X2lkIiwidXNlcl9pZCIsImRldGFpbHMiLCJpcF9hZGRyZXNzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/database.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@neondatabase"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fscenarios%2F%5Bid%5D%2Fcapacity-config%2Froute&page=%2Fapi%2Fscenarios%2F%5Bid%5D%2Fcapacity-config%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fscenarios%2F%5Bid%5D%2Fcapacity-config%2Froute.ts&appDir=C%3A%5Cgit%5CNetWORX%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5Cgit%5CNetWORX&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();